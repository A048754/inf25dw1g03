## C3. Arquitectura general

El sistema sigue una arquitectura cliente-servidor y está compuesto por los siguientes elementos:

### Servidor de aplicación (API REST)
La API REST se ha desarrollado utilizando **LoopBack 4** sobre **Node.js**.
En ella se implementan los endpoints necesarios para la gestión de los recursos del sistema,
siguiendo una arquitectura REST y exponiendo las representaciones en formato JSON.
La API está documentada mediante **OpenAPI 3.0** y es accesible para su prueba a través de Postman.

### Base de datos
La base de datos del sistema se implementa utilizando **MySQL 8**, ejecutándose dentro
de un contenedor Docker.
En la base de datos se almacenan todos los datos relativos a usuarios, eventos, salas, reservas y etiquetas, así como las relaciones entre ellos.
Los datos se almacenan de forma persistente mediante un volumen Docker, lo que permite
conservar la información entre reinicios de los contenedores.
### Inicialización de la base de datos

La base de datos se inicializa automáticamente al arrancar el contenedor MySQL mediante
un script SQL ubicado en `./mysql/init.sql`.  
Este script permite crear la estructura inicial de la base de datos sin necesidad de
intervención manual.

### Cliente de backoffice
El cliente de backoffice se desarrolla utilizando **React-Admin**.
Este cliente consume la API REST y permite realizar operaciones CRUD sobre los distintos recursos de forma visual, facilitando la administración del sistema.

### Contenedorización
El sistema se ejecutará en un entorno **multi-contenedor Docker**, utilizando tres imágenes
principales:
- Un contenedor para la API REST
- Un contenedor para la base de datos MySQL
- Un contenedor para el cliente de backoffice (React-Admin)
## Instalación y ejecución del proyecto
### Requisitos previos

Para ejecutar el proyecto es necesario tener instalado:

- Docker
- Docker Compose
### Ejecución del sistema

Desde la raíz del proyecto, ejecutar el siguiente comando:


docker-compose up --build

Y si se tuviese otros contenedores con los mismos puertos:

Asegurese que no esten funcionando en el momento de ejecutar el proyecto

## Uso de Inteligencia Artificial

Durante el desarrollo del proyecto se ha utilizado Inteligencia Artificial como
**herramienta de apoyo puntual**, principalmente para aclarar conceptos técnicos
y mejorar la comprensión de determinadas partes del código y de la documentación.

### Apoyo en React-Admin

Se utilizó IA como refuerzo para comprender el funcionamiento de los **filtros en
React-Admin**, ya que inicialmente no se entendía correctamente el flujo de datos
entre los filtros, los recursos y la API REST.

En concreto, la IA ayudó a:
- Entender cómo funcionan los componentes `Filter`, `TextInput` y `ReferenceInput`
- Comprender cómo filtrar por campos propios de un recurso
- Comprender cómo aplicar filtros basados en relaciones entre recursos
- Generar un ejemplo funcional de filtros adaptado a los recursos del proyecto

#### Prompt utilizado (aproximado)

> *“No entiendo cómo funcionan los filtros en React-Admin ni cómo se relacionan
con la API REST. ¿Puedes explicarme el flujo de datos y mostrarme un ejemplo
sencillo de filtros usando relaciones?”*

La respuesta obtenida permitió aclarar el concepto y adaptar el código generado
a las necesidades reales del proyecto.

---

### Apoyo en la documentación (Markdown)

La IA también se utilizó como apoyo para la **redacción del archivo README en
formato Markdown**, con el objetivo de estructurar correctamente la documentación
del proyecto y adaptarla a los requisitos del Momento 3.

En este caso, la IA se empleó para:
- Mejorar la estructura del README
- Clarificar qué secciones eran necesarias
- Ajustar el contenido a un nivel académico adecuado

#### Prompt utilizado (aproximado)

> *“Tengo que documentar un proyecto de API REST con LoopBack 4, React-Admin y
Docker. ¿Puedes ayudarme a estructurar un README en Markdown siguiendo un
enunciado académico?”*

La documentación final fue revisada y adaptada manualmente por el grupo para
asegurar su coherencia con el proyecto desarrollado.

### Contexto del Problema

Durante el desarrollo del trabajo práctico, el grupo se encontró con un problema relacionado con la base de datos MySQL. Inicialmente, la base de datos había sido creada de forma local en uno de los ordenadores del grupo. Sin embargo, al ejecutar la aplicación mediante Docker en otros equipos, la base de datos aparecía vacía.

Este comportamiento provocaba que los datos solo existieran en el ordenador donde se creó inicialmente la base de datos, impidiendo que otros usuarios pudieran ejecutar correctamente la API y la aplicación web con los mismos datos.

Para resolver este problema, el grupo utilizó un asistente de Inteligencia Artificial como apoyo durante el desarrollo.

#### Prompt utilizado

El grupo realizó la siguiente consulta al asistente de IA:

> *"Tenemos una aplicación multi-contenedor con Docker (MySQL, una API desarrollada con LoopBack y un cliente web con React Admin). La base de datos funciona correctamente en nuestro ordenador, pero cuando otro usuario ejecuta `docker-compose up`, la base de datos se crea vacía. ¿Cómo podemos asegurar que la base de datos y los datos iniciales se creen automáticamente en cualquier equipo?"*

#### Solución Propuesta por la IA

La solución proporcionada por la Inteligencia Artificial consistió en:

- Migrar la base de datos original al entorno Docker.
- Exportar la base de datos existente a un archivo `init.sql`.
- Configurar el servicio MySQL en `docker-compose.yml` para ejecutar automáticamente dicho script mediante el directorio `/docker-entrypoint-initdb.d`.
- Utilizar volúmenes Docker para garantizar la persistencia de los datos.
- Explicar que, al eliminar los volúmenes (`docker-compose down -v`), la base de datos se recrea automáticamente a partir del script SQL.

Gracias a esta solución, cualquier usuario que clone el repositorio y ejecute el proyecto obtiene la misma base de datos inicial, sin depender de configuraciones locales.

La utilización de Inteligencia Artificial fue clave para comprender el funcionamiento de la persistencia de datos en Docker y aplicar una solución adecuada siguiendo buenas prácticas de desarrollo.
